<!--
  ARREGLAR
    foto del user
    estrellas del rating
-->

<mat-card *ngIf="data">
  <h2 class="mat-h2">{{ data.name }}</h2>
  <main class="row">
    <div class="col col-6 container-img carousel slide" id="carouselExample">
      <div class="carousel-inner">
        <div class="carousel-item active" *ngFor="let item of data.images">
          <img
            class="d-block w-100"
            mat-card-image
            [src]="getImageUrl(item.image.data)"
            alt="Product Image"
          />
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#carouselExample"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#carouselExample"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    <div class="col col-6 container-info-product">
      <div class="container-price">{{ data.price | currency : "USD" }}</div>
      <mat-divider></mat-divider>
      <div class="container-description">
        <div class="title-description" (click)="toggleDescription()">
          <h4>Description</h4>
          <mat-icon>keyboard_arrow_down</mat-icon>
        </div>
        <div class="text-description" [hidden]="isDescriptionHidden">
          <p>{{ data.description }}</p>
        </div>
      </div>
      <mat-divider></mat-divider>
      <div class="container-rating">
        <div class="title-rating" (click)="toggleRating()">
          <h4>Rating</h4>
          <mat-icon>keyboard_arrow_down</mat-icon>
        </div>
        <div class="stars-review" [hidden]="isRatingHidden">
          <mat-icon color="accent">star</mat-icon>
        </div>
      </div>
      <mat-divider></mat-divider>
      <button
        mat-raised-button
        color="primary"
        style="width: 50%; margin: 5% 25%"
      >
        <mat-icon>add_shopping_cart</mat-icon>
        Add to cart
      </button>
    </div>
  </main>

  <section class="container-reviews">
    <h3><mat-icon> rate_review</mat-icon> Comments</h3>
    <div *ngIf="comments.length == 0">
      <h5>No comments yet</h5>
    </div>
    <div *ngFor="let item of comments">
      <div class="card-list-reviews" *ngIf="comments.length > 0">
        <div class="container-img-review">
          <img
            [src]="getImageUrl(item.user.image.data)"
            class="user-image me-1"
          />
        </div>
        <div class="container-info-review">
          <div class="user-review">
            <h5>{{ item.user.name }}</h5>
          </div>
          <div class="text-reviews">
            <p>{{ item.text }}</p>
          </div>
          <div class="text-reviews">
            <p>{{ item.created_at | date : "MMM d, y, h:mm a" }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</mat-card>
